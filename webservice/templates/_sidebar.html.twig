{% import '_navigation_macros.html.twig' as nav %}

{# Desktop Sidebar - hidden on mobile #}
<nav class="sidebar d-none d-md-flex" aria-label="{% trans %}Main navigation{% endtrans %}">
	<div class="sidebar-inner">
		<a href="/" class="sidebar-brand">
			<twig:ux:icon name="pager" class="sidebar-brand-icon" aria-hidden="true" />
			<span class="sidebar-brand-text">{% trans %}Pagersystem{% endtrans %}</span>
		</a>

		<div class="sidebar-nav">
			{{ nav.nav_items_main(true) }}
		</div>

		<div class="sidebar-footer">
			<div class="sidebar-theme-switcher d-js-required" data-controller="dark-mode" data-action="dark-mode:change->dark-mode#updateColorScheme">
				<select name="theme" id="iptThemeSelectSidebar" class="form-select form-select-sm" aria-label="{% trans %}Theme{% endtrans %}" data-dark-mode-target="select" data-action="change->dark-mode#toggle">
					<option value="light">{% trans %}Light{% endtrans %}</option>
					<option value="dark">{% trans %}Dark{% endtrans %}</option>
					<option value="auto">{% trans %}Auto{% endtrans %}</option>
				</select>
			</div>

			<div class="sidebar-user dropdown dropup">
				<button class="sidebar-user-toggle dropdown-toggle" id="sidebarUserDropdown" data-bs-toggle="dropdown" aria-expanded="false">
					<img src="https://picsum.photos/seed/picsum/32" alt="" class="sidebar-user-avatar">
					<span class="sidebar-user-name">{{ app.user.displayname }}</span>
				</button>
				<ul class="dropdown-menu text-small dropdown-menu-end shadow" aria-labelledby="sidebarUserDropdown">
					<li><a class="dropdown-item" href="{{ path('web_userinfo') }}">{% trans %}Account{% endtrans %}</a></li>
					<li><hr class="dropdown-divider"></li>
					<li><a class="dropdown-item" href="{{ path('app_logout') }}">{% trans %}Sign out{% endtrans %}</a></li>
				</ul>
			</div>
		</div>
	</div>
</nav>

{# Mobile Bottom Navigation - visible on mobile only #}
<nav class="mobile-nav d-md-none" aria-label="{% trans %}Mobile navigation{% endtrans %}" data-controller="mobile-menu">
	<div class="mobile-nav-bar">
		<a href="/" class="mobile-nav-item {% if app.request.attributes.get('_route') == 'app_view_web_home__invoke' %}active{% endif %}">
			<twig:ux:icon name="bi:house-door" class="mobile-nav-icon" aria-hidden="true" />
			<span class="mobile-nav-label">{% trans %}Home{% endtrans %}</span>
		</a>

		{% if is_granted('ROLE_ACCESS_WEB_SEND') %}
		<a href="/send" class="mobile-nav-item {% if app.request.attributes.get('_route') == 'app_view_web_sendmessage_sendmessage__invoke' %}active{% endif %}">
			<twig:ux:icon name="bi:chat-quote" class="mobile-nav-icon" aria-hidden="true" />
			<span class="mobile-nav-label">{% trans %}Send{% endtrans %}</span>
		</a>
		{% endif %}

		{% if is_granted('ROLE_VIEW_MESSAGE_HISTORY_SENT_PERSONAL') %}
		<a href="/message-history" class="mobile-nav-item {% if app.request.attributes.get('_route') == 'web_message_history' %}active{% endif %}">
			<twig:ux:icon name="bi:clock-history" class="mobile-nav-icon" aria-hidden="true" />
			<span class="mobile-nav-label">{% trans %}History{% endtrans %}</span>
		</a>
		{% endif %}

		<button type="button" class="mobile-nav-item mobile-nav-menu-btn" data-action="mobile-menu#toggle" aria-expanded="false" aria-controls="mobileMenuOverlay">
			<twig:ux:icon name="bi:list" class="mobile-nav-icon" aria-hidden="true" data-mobile-menu-target="iconMenu" />
			<twig:ux:icon name="bi:x-lg" class="mobile-nav-icon d-none" aria-hidden="true" data-mobile-menu-target="iconClose" />
			<span class="mobile-nav-label">{% trans %}Menu{% endtrans %}</span>
		</button>
	</div>

	{# Mobile Menu Overlay #}
	<div id="mobileMenuOverlay" class="mobile-menu-overlay" data-mobile-menu-target="overlay" aria-hidden="true">
		<div class="mobile-menu-content">
			<div class="mobile-menu-header">
				<a href="/" class="mobile-menu-brand">
					<twig:ux:icon name="pager" class="mobile-menu-brand-icon" aria-hidden="true" />
					<span>{% trans %}Pagersystem{% endtrans %}</span>
				</a>
			</div>

			<div class="mobile-menu-nav">
				{{ nav.nav_items_main(true) }}
			</div>

			<div class="mobile-menu-footer">
				<div class="mobile-menu-theme" data-controller="dark-mode" data-action="dark-mode:change->dark-mode#updateColorScheme">
					<label class="mobile-menu-theme-label">{% trans %}Theme{% endtrans %}</label>
					<select name="theme" class="form-select form-select-sm" aria-label="{% trans %}Theme{% endtrans %}" data-dark-mode-target="select" data-action="change->dark-mode#toggle">
						<option value="light">{% trans %}Light{% endtrans %}</option>
						<option value="dark">{% trans %}Dark{% endtrans %}</option>
						<option value="auto">{% trans %}Auto{% endtrans %}</option>
					</select>
				</div>

				<div class="mobile-menu-user">
					<img src="https://picsum.photos/seed/picsum/32" alt="" class="mobile-menu-user-avatar">
					<div class="mobile-menu-user-info">
						<span class="mobile-menu-user-name">{{ app.user.displayname }}</span>
                        <div>
						    <a href="{{ path('app_logout') }}" class="mobile-menu-user-link pe-2">{% trans %}Sign out{% endtrans %}</a>|<a href="{{ path('web_userinfo') }}" class="mobile-menu-user-link ps-2">{% trans %}Account{% endtrans %}</a>
                        </div>
					</div>
				</div>
			</div>
		</div>
	</div>
</nav>
