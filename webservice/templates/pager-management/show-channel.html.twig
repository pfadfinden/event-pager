{% extends 'layout.html.twig' %}

{% block title %}{% trans %}Pager Administration{% endtrans %}{% endblock %}

{% block main %}
	<main class="main-container mx-auto p-4 pb-5">
		<h1>{% trans %}Pager Administration{% endtrans %}</h1>

		<div class="mt-4">
			<h2>{% trans %}Kanal{% endtrans %}: {{ channel.name }}</h2>
		</div>

		<div class="row gx-5">
		<div class="py-3 mt-5 bg-body-secondary">
			<dl>
				<dt>{% trans %}Name{% endtrans %}</dt>
				<dd>{{ channel.name }}</dd>
				<dt>{% trans %}Cap Code{% endtrans %}</dt>
				<dd>{{ channel.capCode }}</dd>
				<dt>{% trans %}Audible{% endtrans %}</dt>
				<dd>{{ channel.audible ? 'Yes' : 'No' }}</dd>
				<dt>{% trans %}Vibration{% endtrans %}</dt>
				<dd>{{ channel.vibration ? 'Yes' : 'No' }}</dd>
			</dl>
			{% if is_granted('ROLE_MANAGE_PAGER_CONFIGURATION') %}
				<a href="{{ path('web_pager_management_channel_edit', {id: channel.id} ) }}" class="mt-3 btn btn-sm btn-secondary"><twig:ux:icon name="bi:pencil" height="16" width="16" aria-hidden="true" class="bi me-2"/>Edit</a>
			{% endif %}
		</div>

		</div>

		<div class="mt-5">
			<h3>{% trans %}Pager{% endtrans %}</h3>

			<table class="table">
				<thead>
					<tr>
						<th scope="col">#</th>
						<th scope="col">{% trans %}Label{% endtrans %}</th>
						<th scope="col">{% trans %}Active{% endtrans %}</th>
						<th scope="col">{% trans %}Assignment{% endtrans %}</th>
						<th scope="col">{% trans %}Slot{% endtrans %}</th>
					</tr>
				</thead>
				<tbody>
				{% for p in pager %}
					<tr>
						<th scope="row">{{ p.number }}</th>
						<td>{{ p.label }}</td>
						<td>
							{% if p.isActive %}
								<span class="d-inline rounded-pill ps-2 pe-1 text-bg-success fs-6 fw-semibold text-uppercase">{% trans %}Active{% endtrans %}
								<twig:ux:icon name="bi:play-circle" height="16" width="16" aria-hidden="true" class="bi ms-1"/></span>
							{% else %}
								<div class="d-inline rounded-pill ps-2 pe-1 text-bg-danger fs-6 fw-semibold text-uppercase">{% trans %}Inactive{% endtrans %}
									<twig:ux:icon name="bi:pause-circle" height="16" width="16" aria-hidden="true" class="bi ms-1"/></div>
							{% endif %}
						</td>
						<td>{{ p.carriedByName }}</td>
						<td>{{ p.slot }}</td>
					</tr>
				{% else %}
					<tr><td colspan="5">No Pager</td></tr>
				{% endfor %}
				</tbody>
			</table>
		</div>

		{% if is_granted('ROLE_MANAGE_PAGER_CONFIGURATION') %}
		<div class="row gx-5">
		<div class="mt-5 py-3  bg-danger text-bg-danger">
			<h3>Danger Zone</h3>

			<p>This action is destructive and can't be undone. Cap codes will not be removed from pagers automatically, it is recommended to off-board all pager from this channel before deleting the channel.</p>

			{{ form_start(delete_form) }}
			{{ form_errors(delete_form) }}
			{#  <twig:ux:icon name="bi:trash3" height="16" width="16" aria-hidden="true" class="bi me-2"/> #}
			{{ form_widget(delete_form.delete, {'attr': {'class': 'mt-3 btn btn-outline-light'}}) }}
			{{ form_end(delete_form) }}
		</div>
		</div>
		{% endif %}
	</main>
{% endblock %}
