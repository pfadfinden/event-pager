{% extends 'layout.html.twig' %}

{% block title %}{% trans %}Transports{% endtrans %} - {{ transport.title }}{% endblock %}

{% block main %}
	<main class="main-container mx-auto p-4">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="{{ path('web_admin_home') }}">{% trans %}Administration{% endtrans %}</a></li>
				<li class="breadcrumb-item"><a href="{{ path('web_admin_home') }}#transports">{% trans %}Transports{% endtrans %}</a></li>
				<li class="breadcrumb-item active" aria-current="page">{{ transport.title }}</li>
			</ol>
		</nav>

		<h1>
			<span class="badge {{ transport.enabled ? 'bg-success' : 'bg-secondary' }} me-2">
				<twig:ux:icon name="bi:broadcast" height="20" width="20" aria-hidden="true" class="bi align-baseline"/>
			</span>
			{{ transport.title }}
		</h1>

		<div class="row gx-5">
			<div class="py-3 mt-5 col-12 col-md bg-body-secondary">
				<h3>{% trans %}Details{% endtrans %}</h3>
				<dl>
					<dt>{% trans %}Key{% endtrans %}</dt>
					<dd><code>{{ transport.key }}</code></dd>
					<dt>{% trans %}Title{% endtrans %}</dt>
					<dd>{{ transport.title }}</dd>
					<dt>{% trans %}Type{% endtrans %}</dt>
					<dd>{{ transport.transport|split('\\')|last }}</dd>
					<dt>{% trans %}Status{% endtrans %}</dt>
					<dd>
						{% if transport.enabled %}
							<span class="badge bg-success">{% trans %}Enabled{% endtrans %}</span>
						{% else %}
							<span class="badge bg-secondary">{% trans %}Disabled{% endtrans %}</span>
						{% endif %}
					</dd>
				</dl>
				{% if is_granted('ROLE_TRANSPORT_ADMINISTRATOR') %}
					<a href="{{ path('web_admin_transport_edit', {key: transport.key}) }}" class="btn btn-outline-primary btn-sm">
						{% trans %}Edit{% endtrans %}
					</a>
				{% endif %}
			</div>
		</div>

		{% if transport.vendorSpecificConfig is not null %}
		<div class="mt-5">
			<h3>{% trans %}Vendor Configuration{% endtrans %}</h3>
			<pre class="bg-body-secondary p-3 rounded"><code>{{ transport.vendorSpecificConfig|json_encode(constant('JSON_PRETTY_PRINT')) }}</code></pre>
		</div>
		{% endif %}

		{% if is_granted('ROLE_TRANSPORT_ADMINISTRATOR') %}
		<div class="row gx-5">
			<div class="mt-5 py-3 bg-danger text-bg-danger">
				<h3>{% trans %}Danger Zone{% endtrans %}</h3>
				<p>{% trans %}This action is destructive and cannot be undone.{% endtrans %}</p>
				{{ form_start(delete_form) }}
				{{ form_errors(delete_form) }}
				{{ form_widget(delete_form.delete, {'attr': {'class': 'mt-3 btn btn-outline-light'}}) }}
				{{ form_end(delete_form) }}
			</div>
		</div>
		{% endif %}
	</main>
{% endblock %}
