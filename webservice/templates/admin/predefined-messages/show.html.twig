{% extends 'layout.html.twig' %}

{% block title %}{% trans %}Predefined Messages{% endtrans %} - {{ message.title }}{% endblock %}

{% block main %}
	<main class="main-container mx-auto p-4">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="{{ path('web_admin_home') }}">{% trans %}Administration{% endtrans %}</a></li>
				<li class="breadcrumb-item"><a href="{{ path('web_admin_predefined_messages_overview') }}">{% trans %}Predefined Messages{% endtrans %}</a></li>
				<li class="breadcrumb-item active" aria-current="page">{{ message.title }}</li>
			</ol>
		</nav>

		<h1 class="mb-4">
			<span class="badge bg-secondary me-2">
				<twig:ux:icon name="bi:chat-text" height="20" width="20" aria-hidden="true" class="bi align-baseline"/>
			</span>
			{{ message.title }}
		</h1>

		{% if is_granted('ROLE_PREDEFINEDMESSAGES_EDIT') %}
			<a href="{{ path('web_admin_predefined_messages_edit', {id: message.id}) }}" class="btn btn-outline-primary">
				{% trans %}Edit{% endtrans %}
			</a>
		{% endif %}

		<div class="row mt-4">
			<div class="py-3 col-12 col-md-6">
				<h3>{% trans %}Details{% endtrans %}</h3>
				<dl>
					<dt>{% trans %}Title{% endtrans %}</dt>
					<dd>{{ message.title }}</dd>
					<dt>{% trans %}Message Content{% endtrans %}</dt>
					<dd>{{ message.messageContent }}</dd>
					<dt>{% trans %}Priority{% endtrans %}</dt>
					<dd>{{ message.priority }}</dd>
				</dl>
			</div>
			<div class="py-3 col-12 col-md-6">
				<h3>{% trans %}Status{% endtrans %}</h3>
				<dl>
					<dt>{% trans %}Enabled{% endtrans %}</dt>
					<dd>
						{% if message.isEnabled %}
							<span class="badge bg-success">{% trans %}Yes{% endtrans %}</span>
						{% else %}
							<span class="badge bg-secondary">{% trans %}No{% endtrans %}</span>
						{% endif %}
					</dd>
					<dt>{% trans %}Favorite{% endtrans %}</dt>
					<dd>
						{% if message.isFavorite %}
							<span class="badge bg-warning text-dark">{% trans %}Yes{% endtrans %}</span>
						{% else %}
							<span class="badge bg-secondary">{% trans %}No{% endtrans %}</span>
						{% endif %}
					</dd>
                    <dt>{% trans %}Sort Order{% endtrans %}</dt>
                    <dd>{{ message.sortOrder }}</dd>
				</dl>
			</div>
		</div>

		<div class="row mt-3">
			<div>
				<h3>{% trans %}Recipients{% endtrans %}</h3>
				<ul class="list-group">
					{% for recipientId in message.recipientIds %}
						<li class="list-group-item">
							{{ component('RecipientWithId', { id: recipientId }) }}
						</li>
					{% else %}
						<li class="list-group-item text-muted">{% trans %}No recipients configured{% endtrans %}</li>
					{% endfor %}
				</ul>
			</div>
		</div>

		{% if is_granted('ROLE_PREDEFINEDMESSAGES_DELETE') %}
		<div class="row gx-5">
			<div class="mt-5 py-3 bg-danger text-bg-danger">
				<h3>{% trans %}Danger Zone{% endtrans %}</h3>
				<p>{% trans %}This action is destructive and cannot be undone.{% endtrans %}</p>
				{{ form_start(delete_form) }}
				{{ form_errors(delete_form) }}
				{{ form_widget(delete_form.delete, {'attr': {'class': 'mt-3 btn btn-outline-light'}}) }}
				{{ form_end(delete_form) }}
			</div>
		</div>
		{% endif %}
	</main>
{% endblock %}
