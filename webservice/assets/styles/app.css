:root {
    /* Recipient type badge colors - custom palette */
    --recipient-person-bg: #6f42c1;    /* Purple */
    --recipient-group-bg: #20c997;     /* Teal */
    --recipient-role-bg: #fd7e14;      /* Orange */
    --recipient-badge-color: #ffffff;  /* White text for all badges */
}

/* Recipient type badges */
.badge-recipient-person {
    background-color: var(--recipient-person-bg);
    color: var(--recipient-badge-color);
}
.h2-productive {
    font-size: calc(var(--bs-body-font-size, 1rem) * 1 + 1vw);
    font-weight: 550;
}

.h3-productive {
    font-size: calc(var(--bs-body-font-size, 1rem) * 0.8 + 1vw);
    font-weight: 550;
}

/* ========================================
   PRIORITY SELECTOR
   ======================================== */

legend:has(+.priority-selector) {
    padding-block: 0;
    margin-block-end: 0.5rem;
}

.priority-selector {
    display: flex;
    gap: 2px;
}

.priority-selector .btn {
    flex: 1 1 auto;
    min-width: 2.5rem;
    background-color: var(--bs-body-bg);
}

.priority-selector .btn .priority-label {
    font-size: 60%;
}

/* Mobile: Compact icon-only buttons */
@media (max-width: 991.98px) {
    .priority-selector .btn {
        padding: 0.5rem 0.75rem;
    }
}

/* Desktop: Show labels on larger screens */
@media (min-width: 992px) {
    .priority-selector .btn .visually-hidden {
        position: static !important;
        width: auto !important;
        height: auto !important;
        padding: 0 !important;
        margin: 0 0 0 0.25rem !important;
        overflow: visible !important;
        clip: auto !important;
        white-space: nowrap !important;
        border: 0 !important;
    }
}

/* ========================================
   SEND MESSAGE FORM
   ======================================== */

.send-message-form {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    min-height: 100vh;
}

.send-message-form__container {
    flex: 1 1 100%;
}

/* Desktop: Side-by-side layout with predefined messages sidebar */
@media (min-width: 1400px) {
    .send-message-form {
        max-height: 100%;
    }
    .send-message-form__container {
        flex: 1 1 0;
        min-width: 0;
        max-height: 100%;
    }
}

.send-message-form__container form {
    display: flex;
    flex-direction: column;
    height: 100%;
}

/* Recipient selector area */
.send-message-form__select-recipient-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    flex-basis: min-content;
}

/* Desktop: Two-column recipient selector */
@media (min-width: 1400px) {
    .send-message-form__select-recipient-container {
        flex-wrap: nowrap;
    }

    .send-message-form__search-column {
        flex: 0 0 40%;
        max-width: 40%;
        min-height: 1px;
        height: 100%;
        display: flex;
        flex-direction: column;
        padding-inline-end: 1rem;
    }

    .send-message-form__selected-column {
        flex: 1 1 0;
        min-width: 0;
        min-height: 1px;
        height: 100%;
        display: flex;
        flex-direction: column;
    }
}

/* Mobile: Stack columns */
@media (max-width: 1399px) {
    .send-message-form__search-column,
    .send-message-form__selected-column {
        flex: 1 1 100%;
    }

    /* Hide the arrow decoration on mobile */
    .end-border-arrow {
        border-right: none !important;
    }

    .end-border-arrow__triangle {
        display: none !important;
    }


    .send-message-form__selected {
        max-height: 200px;
    }
}

.send-message-form__selected {
    min-height: 150px;
    flex-grow: 1;
    flex-basis: 1px;
    overflow-y: auto;
}

/* Mobile: Selected recipients as badges */
.send-message-form__selected-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    min-height: 60px;
}

.send-message-form__selected-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.625rem;
    background-color: var(--bs-primary);
    color: var(--bs-white);
    border-radius: var(--bs-border-radius);
    font-size: 0.875rem;
}

.send-message-form__selected-badge .btn-close {
    font-size: 0.5rem;
    padding: 0.25rem;
}

/* ========================================
   PREDEFINED MESSAGES SIDEBAR
   ======================================== */

.send-message-form__sidebar {
    flex: 1 1 100%;
    min-width: 0;
}

/* Desktop xl+: Fixed width sidebar */
@media (min-width: 1400px) {
    .send-message-form__sidebar {
        flex: 0 0 320px;
        width: 320px;
    }

    .predefined-messages-sidebar__nav {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
}

/* Below xl: Full width with grid layout for messages */
@media (max-width: 1399px) {
    .send-message-form__sidebar {
        order: 1; /* Move below the form container */
    }

    .predefined-messages-sidebar__nav {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 0.5rem;
    }

    .predefined-messages-sidebar__item {
        margin-bottom: 0;
    }
}

/* Small screens: Smaller min-width for grid items */
@media (max-width: 575.98px) {
    .predefined-messages-sidebar__nav {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    }
}

.end-border-arrow {
    --eba-style: solid;
    --eba-col: currentColor;
    border-right: 2px var(--eba-style) var(--eba-col);
    position: relative;
}

.end-border-arrow__triangle {
    position: absolute;
    right: -10px;
    top: 2.5rem;
}

.end-border-arrow__triangle:before,
.end-border-arrow__triangle:after {
    content: "";
    display: inline-block;
    width: 0;
    height: 0;
}

.end-border-arrow__triangle:before {
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-left: 10px solid var(--eba-col);
}

.end-border-arrow__triangle:after {
    position: absolute;
    right: 2px;
    top: 1.5px;
    border-top: 8px solid transparent;
    border-left: 8px solid var(--bs-secondary-bg);
    border-bottom: 8px solid transparent;
}

.btn-sm-table {
    --bs-btn-padding-y: .25rem;
    --bs-btn-padding-x: .5rem;
    --bs-btn-font-size: .75rem;
}

.fixw-2_4rem {
    width: 2.4rem;
}

/* ========================================
   COMBOBOX (Search + Select)
   ======================================== */

.combobox {
    display: flex;
    flex-direction: column;
}

.combobox input {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    flex-shrink: 0;
}

.combobox select {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    border-top: 0;
    min-height: 150px;
    padding: 0 !important;
    overflow-y: auto;
}

.combobox option:checked {
    color: inherit; /* fix for mozilla build in style */
}

/* Desktop: Taller select for two-column layout */
@media (min-width: 768px) {
    .combobox select {
        min-height: 200px;
        flex-grow: 1;
    }

    .send-message-form__search-column .combobox {
        flex-grow: 1;
    }
}

.combobox option {
    padding-left: 0.5rem;
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
    /* the following overwrites the optgroup styles */
    text-align: start;
    background-color: var(--bs-body-bg);
}

.combobox optgroup {
    text-align: center;
    background-color: var(--bs-tertiary-bg);
    font-style: normal;
}

.badge-recipient-group {
    background-color: var(--recipient-group-bg);
    color: var(--recipient-badge-color);
}

.badge-recipient-role {
    background-color: var(--recipient-role-bg);
    color: var(--recipient-badge-color);
}

.dot {
    height: 1em;
    width: 1em;
    background-color: currentColor;
    border-radius: 50%;
    display: inline-block;
}

.icon-plus-double {
    white-space: nowrap;
}

.icon-plus-double svg~svg {
    margin-inline-start: -0.4rem;
}


.show-parent-mo,  .show-parent-focus  {
    display:none;
}

*:hover > .show-parent-mo {
    display: block;
}

*:focus-within:not(:hover) > .show-parent-focus {
    display: block;
}

.expand-icon {
    transition: transform 0.2s ease-in-out;
}
tr[aria-expanded="true"] .expand-icon {
    transform: rotate(90deg);
}

/* ========================================
   MESSAGE LIST (Responsive Table/Cards)
   Bootstrap table-like styling on desktop, cards on mobile
   ======================================== */

.message-list__empty {
    padding: 2rem;
    text-align: center;
}

/* Desktop: Bootstrap table styling */
@media (min-width: 1200px) {
    .message-list {
        width: 100%;
        margin-bottom: 1rem;
        vertical-align: top;
        border-color: var(--bs-border-color);
    }

    .message-list__header {
        border-bottom: 2px solid currentcolor;
        vertical-align: bottom;
    }

    .message-list__row {
        display: flex;
        align-items: center;
        border-bottom: 1px solid var(--bs-border-color);
    }

    .message-list__body .message-list__row:hover {
        background-color: rgba(var(--bs-emphasis-color-rgb), 0.075);
    }

    .message-list__cell {
        padding: 0.5rem;
        vertical-align: middle;
        min-width: 0;
    }

    .message-list__header .message-list__cell {
        font-weight: bold;
    }

    /* Column widths */
    .message-list__cell--timestamp { flex: 0 0 110px; }
    .message-list__cell--content { flex: 1 1 auto; }
    .message-list__cell--recipients {
        flex: 0 0 400px;
        overflow: hidden;
    }
    .message-list__cell--recipients > * {
        display: inline;
    }
    .message-list__cell--priority { flex: 0 0 70px; text-align: center; }
    .message-list__cell--status { flex: 0 0 200px; }
}

/* Mobile: Card layout */
@media (max-width: 1199.99px) {

    .message-list__header {
        display: none;
    }

    .message-list__row {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-areas:
            "timestamp priority"
            "content content"
            "recipients status";
        gap: 0.5rem;
        padding: 0.75rem;
        background-color: var(--bs-body-bg);
        border: 1px solid var(--bs-border-color);
        border-radius: var(--bs-border-radius);
    }

    .message-list__row ~ .message-list__row {
        margin-top: 0.5rem;
    }

    .message-list__cell {
        min-width: 0;
    }

    .message-list__cell--timestamp {
        grid-area: timestamp;
        font-size: 0.875rem;
        color: var(--bs-secondary-color);
    }

    .message-list__cell--content {
        grid-area: content;
    }

    .message-list__cell--recipients {
        grid-area: recipients;
        display: flex;
        flex-wrap: wrap;
        gap: 0;
        align-items: center;
    }

    .message-list__cell--recipients::before {
        content: attr(data-label) ":";
        color: var(--bs-secondary-color);
        margin-right: 0.5rem;
    }

    .message-list__cell--priority {
        grid-area: priority;
        text-align: right;
    }

    .message-list__cell--status {
        grid-area: status;
        text-align: right;
    }
}


/* Mobile: Card layout */
@media (max-width: 576px) {
    .message-list__row {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-areas:
            "timestamp priority"
            "content content"
            "recipients recipients"
            "status status";
        gap: 0.5rem;
        padding: 0.75rem;
        background-color: var(--bs-body-bg);
        border: 1px solid var(--bs-border-color);
        border-radius: var(--bs-border-radius);
    }
}
